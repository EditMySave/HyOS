---
description: Server Manager UI component patterns
globs: server-manager/**/components/**/*.{ts,tsx}
alwaysApply: false
---

# UI Components Rules

## Foundation

- **Shadcn/ui** as the base for all components
- **Tailwind CSS only** - no CSS modules, styled-components, or inline styles
- Functional components with hooks
- Extract reusable logic into custom hooks

## Component Patterns

```tsx
// Props with Zod schema
import { z } from 'zod';

const buttonPropsSchema = z.object({
  variant: z.enum(['default', 'destructive', 'outline']).default('default'),
  size: z.enum(['sm', 'md', 'lg']).default('md'),
});

type ButtonProps = z.infer<typeof buttonPropsSchema> & {
  children: React.ReactNode;
};
```

## Styling Rules

```tsx
// ✅ Use Tailwind utilities with Shadcn base
import { Button } from '@/components/ui/button';
<Button className="mt-4 w-full" variant="outline">Submit</Button>

// ✅ Compose with cn() utility
import { cn } from '@/lib/utils';
<div className={cn('flex gap-2', isActive && 'bg-accent')} />

// ❌ Never use inline styles
<div style={{ marginTop: 16 }} />

// ❌ Never use CSS modules
import styles from './Component.module.css';
```

## Adding New Components

1. Use `npx shadcn@latest add <component>` when available
2. Customize with Tailwind classes only
3. Keep components in `/components/ui/` for primitives

## Shadcn Theming with CSS Variables

Configure `components.json` to use CSS variables:

```json
{
  "tailwind": {
    "config": "tailwind.config.js",
    "css": "app/globals.css",
    "baseColor": "slate",
    "cssVariables": true
  }
}
```

## Theme Provider Pattern

```tsx
// components/theme-provider.tsx
import { createContext, useContext, useEffect, useState } from 'react';

type Theme = 'dark' | 'light' | 'system';

const ThemeProviderContext = createContext<{
  theme: Theme;
  setTheme: (theme: Theme) => void;
}>({ theme: 'system', setTheme: () => null });

export function ThemeProvider({ children, defaultTheme = 'system' }) {
  const [theme, setTheme] = useState<Theme>(
    () => (localStorage.getItem('theme') as Theme) || defaultTheme
  );

  useEffect(() => {
    const root = document.documentElement;
    root.classList.remove('light', 'dark');
    
    if (theme === 'system') {
      const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches
        ? 'dark' : 'light';
      root.classList.add(systemTheme);
      return;
    }
    root.classList.add(theme);
  }, [theme]);

  return (
    <ThemeProviderContext.Provider value={{ theme, setTheme }}>
      {children}
    </ThemeProviderContext.Provider>
  );
}

export const useTheme = () => useContext(ThemeProviderContext);
```

## Cablefied Theme Requirements

The UI follows the Cablefied design system:

```tsx
// ❌ No rounded corners
<div className="rounded-lg" />

// ✅ Square edges everywhere
<div className="rounded-none" />

// Background: dotted pattern (not grid)
// Font: Cablefied custom font (cablefied.woff2)
// Nav: Boxed items with separators + active underline
```

## Key Rendering Warnings

Avoid React key warnings in conditional renders:

```tsx
// ❌ Creates implicit array with falsy value
{condition && <Component />}
{items.map(item => <Item key={item.id} />)}

// ✅ Use fragments or proper conditionals
{condition ? <Component /> : null}
{items.map(item => <Item key={item.id} />)}
```
